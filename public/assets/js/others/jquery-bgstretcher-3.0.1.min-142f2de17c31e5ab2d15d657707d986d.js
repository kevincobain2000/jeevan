!function(e){var t,n,r,i,s,a,g,c,h,o;t=null,n="",r="",i=!1,s=!1,a=null,g=[],c=[],h=0,o={imageWidth:0,imageHeight:0,marginLeft:0,marginTop:0};var l=function(){return e(".bgstretcher-page").length>0||e(".bgstretcher-area").length>0},d=function(){return"undefined"!=typeof console&&null!==console},f=function(e){d()?console.log(e):alert(e)},b=function(){if("Microsoft Internet Explorer"===navigator.appName){var e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(null!==e.exec(navigator.userAgent)&&parseFloat(RegExp.$1)<=6)return!0}return!1},u={containerId:"bgstretcher",resizeProportionally:!0,resizeAnimate:!1,images:[],imageWidth:1024,imageHeight:768,maxWidth:"auto",maxHeight:"auto",nextSlideDelay:3e3,slideShowSpeed:"normal",slideShow:!0,transitionEffect:"fade",slideDirection:"N",sequenceMode:"normal",buttonPrev:"",buttonNext:"",pagination:"",anchoring:"left top",anchoringImg:"left top",preloadImages:!1,startElementIndex:0,sliderCallbackFunc:null};e.fn.bgStretcher=function(i){var s=u,g=function(t){return s=e.extend({},u,i),e.fn.bgStretcher.settings=s,s.images.length<=0?(f("Error: Images array cannot be empty!"),!1):(t.addClass("bgstretcher-container"),c(t),t)},c=function(i){if(l()||d(i),r="#"+s.containerId,t=e(r),n="#"+s.containerId+" LI",!(t.length<1)){e(n).hide().css({"z-index":1,overflow:"hidden"}),e(window).unbind("resize").bind("resize",function(){h(i)}),!0===b()&&e(window).unbind("scroll").bind("scroll",function(){e("#"+s.containerId).css("top",e(window).scrollTop())}),h(i);var g=0,c=0,o=0;if(e(r+" ul").css({left:0,top:0}),e(r+" li.bgs-current").removeClass("bgs-current"),e(r+" li:first").addClass("bgs-current"),"simpleSlide"===e.fn.bgStretcher.settings.transitionEffect&&("random"===e.fn.bgStretcher.settings.slideDirection&&(e.fn.bgStretcher.settings.slideDirection="normal",f("The effect 'simpleSlide cannot be used in mode 'random'. The mode has been automatically switched to 'normal'.")),e(n).css({"float":"left",position:"static"}).show(),("NW"===e.fn.bgStretcher.settings.slideDirection||"NE"===e.fn.bgStretcher.settings.slideDirection)&&(e.fn.bgStretcher.settings.slideDirection="N"),("SW"===e.fn.bgStretcher.settings.slideDirection||"SE"===e.fn.bgStretcher.settings.slideDirection)&&(e.fn.bgStretcher.settings.slideDirection="S"),"S"===e.fn.bgStretcher.settings.slideDirection||"E"===e.fn.bgStretcher.settings.slideDirection?(e.fn.bgStretcher.settings.sequenceMode="back",e(n).removeClass("bgs-current"),e(n).eq(e(n).length-e.fn.bgStretcher.settings.startElementIndex-1).addClass("bgs-current"),"E"===e.fn.bgStretcher.settings.slideDirection?(c=e(r+" LI").index(e(r+" LI.bgs-current"))*e(r).width()*-1,o=0):(o=e(r+" LI").index(e(r+" LI.bgs-current"))*e(r).height()*-1,c=0),e(r+" UL").css({left:c+"px",top:o+"px"})):(s.sequenceMode="normal",0!==e.fn.bgStretcher.settings.startElementIndex&&("N"===e.fn.bgStretcher.settings.slideDirection?(o=e(r+" LI").index(e(r+" LI.bgs-current"))*e(r).height()*-1,c=0):(c=e(r+" LI").index(e(r+" LI.bgs-current"))*e(r).width()*-1,o=0),e(r+" UL").css({left:c+"px",top:o+"px"})))),(e(s.buttonNext).length||e(s.buttonPrev).length||e(s.pagination).length)&&("random"===s.sequenceMode?f("'random' mode cannot be used when prevButton, nextButton and/or pagination is active."):(e(s.buttonPrev).length&&(e(s.buttonPrev).addClass("bgStretcherNav bgStretcherNavPrev"),e(s.buttonPrev).click(function(){e.fn.bgStretcher.buttonSlide("prev")})),e(s.buttonNext).length&&(e(s.buttonNext).addClass("bgStretcherNav bgStretcherNavNext"),e(s.buttonNext).click(function(){e.fn.bgStretcher.buttonSlide("next")})),e(s.pagination).length&&e.fn.bgStretcher.pagination())),"random"===s.sequenceMode){var u=Math.floor(Math.random()*e(n).length);e.fn.bgStretcher.buildRandom(u),"simpleSlide"!==s.transitionEffect&&(e.fn.bgStretcher.settings.startElementIndex=u),g=u}else e.fn.bgStretcher.settings.startElementIndex>e(n).length-1&&(e.fn.bgStretcher.settings.startElementIndex=0),g=e.fn.bgStretcher.settings.startElementIndex,"simpleSlide"===s.transitionEffect&&("S"===e.fn.bgStretcher.settings.slideDirection||"E"===e.fn.bgStretcher.settings.slideDirection)&&(g=e(n).length-1-e.fn.bgStretcher.settings.startElementIndex);e(n).eq(g).show().addClass("bgs-current"),e.fn.bgStretcher.preloadImage(e(n).eq(g)),s.slideShow&&e(n).length>1&&(e.fn.bgStretcher.clearSliderTimeout(),a=setTimeout("jQuery.fn.bgStretcher.slideShow('"+jQuery.fn.bgStretcher.settings.sequenceMode+"', -1)",s.nextSlideDelay))}},h=function(i){var a=0,g=0,c=0,h=0,l=0,d=0;if(e("body").hasClass("bgstretcher-container")?(a=parseInt(e(window).width(),10),g=parseInt(e(window).height(),10)):(e(".bgstretcher").css("position","absolute").css("top","0px"),a=parseInt(i.width(),10),g=parseInt(i.height(),10)),c="auto"!==s.maxWidth?a>s.maxWidth?s.maxWidth:a:a,h="auto"!==s.maxHeight?g>s.maxHeight?s.maxHeight:g:g,t.width(c).height(h),!1===s.resizeProportionally)l=c,d=h;else{var b=s.imageWidth,u=s.imageHeight,S=u/b;l=c,d=Math.round(c*S),h>d&&(d=h,l=Math.round(d/S))}var m,p=0,x=0;if("left top"!==s.anchoring&&(m=s.anchoring.split(" "),2===m.length&&("right"===m[0]?p=a-c:"center"===m[0]&&(p=Math.round((a-c)/2)),"bottom"===m[1]?x=g-h:"center"===m[1]&&(x=Math.round((g-h)/2)),t.css({marginLeft:p+"px",marginTop:x+"px"}))),p=0,x=0,"left top"!==s.anchoringImg&&(m=s.anchoringImg.split(" "),2===m.length&&("right"===m[0]?p=c-l:"center"===m[0]&&(p=Math.round((c-l)/2)),"bottom"===m[1]?x=h-d:"center"===m[1]&&(x=Math.round((h-d)/2)))),o.marginLeft=p,o.marginTop=x,t.find("LI:first").hasClass("swf-mode"))if("undefined"==typeof SWFObject)f("SWFObject is required if you would like to use flash with bgStretcher.");else{var I=t.find("LI:first").html();t.find("LI:first").html('<div id="bgstretcher-flash">&nbsp;</div>');var w=new SWFObject(I,"flash-obj",c,h,"9");w.addParam("wmode","transparent"),w.write("bgstretcher-flash")}o.imageWidth=l,o.imageHeight=d,s.resizeAnimate?(t.children("UL").children("LI.img-loaded").find("IMG").animate({marginLeft:o.marginLeft+"px",marginTop:o.marginTop+"px"},"normal"),t.children("UL").children("LI.img-loaded").find("IMG").animate({width:o.imageWidth+"px",height:o.imageHeight+"px"},"normal")):(t.children("UL").children("LI.img-loaded").find("IMG").css({marginLeft:o.marginLeft+"px",marginTop:o.marginTop+"px"}),t.children("UL").children("LI.img-loaded").find("IMG").css({width:o.imageWidth+"px",height:o.imageHeight+"px"})),e(n).width(t.width()).height(t.height()),"simpleSlide"===e.fn.bgStretcher.settings.transitionEffect&&("W"===e.fn.bgStretcher.settings.slideDirection||"E"===e.fn.bgStretcher.settings.slideDirection?(t.children("UL").width(t.width()*e(n).length).height(t.height()),-1!==e(r+" LI").index(e(r+" LI.bgs-current"))&&t.children("UL").css({left:e(r+" LI").index(e(r+" LI.bgs-current"))*t.width()*-1+"px"})):(t.children("UL").height(t.height()*e(n).length).width(t.width()),-1!==e(r+" LI").index(e(r+" LI.bgs-current"))&&t.children("UL").css({top:e(r+" LI").index(e(r+" LI.bgs-current"))*e(r).height()*-1+"px"})))},d=function(t){var n="";t.each(function(){if(e(this).wrapInner('<div class="bgstretcher-page" />').wrapInner('<div class="bgstretcher-area" />'),n='<div id="'+s.containerId+'" class="bgstretcher"><ul>',s.images.length>0){var t;if(t=s.images[0].split("."),t=t[t.length-1],"swf"!==t)for(var r=0,i=0;i<s.images.length;i++)r="simpleSlide"===s.transitionEffect&&"back"===s.sequenceMode?s.images.length-1-i:i,n+=!0===e.fn.bgStretcher.settings.preloadImages?'<li><span class="image-path">'+s.images[r]+"</span></li>":'<li class="img-loaded"><img src="'+s.images[r]+'" alt="" /></li>';else n+='<li class="swf-mode">'+s.images[0]+"</li>"}n+="</ul></div>";var a=e(this).children(".bgstretcher-area");e(n).prependTo(a),a.css({position:"relative"}),a.children(".bgstretcher-page").css({position:"relative","z-index":3})})};return g(this)},e.fn.bgStretcher.preloadImage=function(t){return t.hasClass("img-loaded")?!0:(t.find("SPAN.image-path").each(function(){var t=e(this).html(),n="",r=e(this).parent(),i=new Image;e(i).load(function(){e(this).hide(),r.prepend(this),e(this).fadeIn(100)}).error(function(){}).attr("src",t).attr("alt",n),e(i).css({marginLeft:o.marginLeft+"px",marginTop:o.marginTop+"px",width:o.imageWidth+"px",height:o.imageHeight+"px"})}),t.addClass("img-loaded"),!0)},e.fn.bgStretcher.play=function(){i=!1,e.fn.bgStretcher.clearSliderTimeout(),e.fn.bgStretcher.slideShow(e.fn.bgStretcher.settings.sequenceMode,-1)},e.fn.bgStretcher.clearSliderTimeout=function(){null!==a&&(clearTimeout(a),a=null)},e.fn.bgStretcher.pause=function(){i=!0,e.fn.bgStretcher.clearSliderTimeout()},e.fn.bgStretcher.sliderDestroy=function(){var t=e(".bgstretcher-page").html();e(".bgstretcher-container").html("").html(t).removeClass("bgstretcher-container"),e.fn.bgStretcher.clearSliderTimeout(),i=!1},e.fn.bgStretcher.slideShow=function(t,c){if(s=!0,e(n).length<2)return!0;c||(c=-1);var o=e(r+" LI.bgs-current"),l=!1;if(e(o).stop(!0,!0),-1===c)switch(t){case"back":l=o.prev(),l.length||(l=e(r+" LI:last"));break;case"random":h===e(r+" LI").length&&(e.fn.bgStretcher.buildRandom(g[e(r+" LI").length-1]),h=0),l=e(r+" LI").eq(g[h]),h++;break;default:l=o.next(),l.length||(l=e(r+" LI:first"))}else l=e(r+" LI").eq(c);switch(e(r+" LI").removeClass("bgs-current"),e.fn.bgStretcher.preloadImage(l),l.addClass("bgs-current"),e.fn.bgStretcher.settings.transitionEffect){case"fade":e.fn.bgStretcher.effectFade(o,l);break;case"simpleSlide":e.fn.bgStretcher.simpleSlide();break;case"superSlide":e.fn.bgStretcher.superSlide(o,l,t);break;default:e.fn.bgStretcher.effectNone(o,l)}return e(e.fn.bgStretcher.settings.pagination).find("LI").length&&(e(e.fn.bgStretcher.settings.pagination).find("LI.showPage").removeClass("showPage"),e(e.fn.bgStretcher.settings.pagination).find("LI").eq(e(r+" LI").index(e(r+" LI.bgs-current"))).addClass("showPage")),e.fn.bgStretcher.settings.sliderCallbackFunc&&"function"==typeof e.fn.bgStretcher.settings.sliderCallbackFunc&&e.fn.bgStretcher.settings.sliderCallbackFunc.call(),i||(a=setTimeout("jQuery.fn.bgStretcher.slideShow('"+jQuery.fn.bgStretcher.settings.sequenceMode+"', -1)",jQuery.fn.bgStretcher.settings.nextSlideDelay)),!0},e.fn.bgStretcher.effectNone=function(e,t){t.show(),e.hide(),s=!1},e.fn.bgStretcher.effectFade=function(t,n){n.fadeIn(e.fn.bgStretcher.settings.slideShowSpeed),t.fadeOut(e.fn.bgStretcher.settings.slideShowSpeed,function(){s=!1})},e.fn.bgStretcher.simpleSlide=function(){var t,n;"N"===e.fn.bgStretcher.settings.slideDirection||"S"===e.fn.bgStretcher.settings.slideDirection?(n=e(r+" LI").index(e(r+" LI.bgs-current"))*e(r).height()*-1,t=0,e(r+" UL").css({left:"0"})):(t=e(r+" LI").index(e(r+" LI.bgs-current"))*e(r).width()*-1,n=0,e(r+" UL").css({top:"0"})),e(r+" UL").stop().animate({left:t+"px",top:n+"px"},e.fn.bgStretcher.settings.slideShowSpeed,function(){s=!1})},e.fn.bgStretcher.superSlide=function(t,n,i){var a,g;switch(e.fn.bgStretcher.settings.slideDirection){case"S":g=e(r).height(),a=0;break;case"E":g=0,a=e(r).width();break;case"W":g=0,a=-1*e(r).width();break;case"NW":g=-1*e(r).height(),a=-1*e(r).width();break;case"NE":g=-1*e(r).height(),a=e(r).width();break;case"SW":g=e(r).height(),a=-1*e(r).width();break;case"SE":g=e(r).height(),a=e(r).width();break;default:g=-1*e(r).height(),a=0}"back"===i?(n.css({"z-index":2,top:g+"px",left:a+"px"}),n.show(),n.animate({left:"0px",top:"0px"},e.fn.bgStretcher.settings.slideShowSpeed,function(){t.hide(),e(this).css({"z-index":1}),s=!1})):(t.css("z-index",2),n.show(),t.animate({left:a+"px",top:g+"px"},e.fn.bgStretcher.settings.slideShowSpeed,function(){e(this).hide().css({"z-index":1,top:"0px",left:"0px"}),s=!1}))},e.fn.bgStretcher.buildRandom=function(t){var r,i,s,a=e(n).length;for(r=0;a>r;r++)g[r]=r,c[r]=Math.random()*a;for(r=0;a>r;r++)for(i=0;a-r-1>i;i++)c[i]>c[i+1]&&(s=c[i],c[i]=c[i+1],c[i+1]=s,s=g[i],g[i]=g[i+1],g[i+1]=s);g[0]===t&&(s=g[0],g[0]=g[a-1],g[a-1]=s)},e.fn.bgStretcher.buttonSlide=function(t){if(s||e(n).length<2)return!1;var r="";return"prev"===t?(r="back","back"===e.fn.bgStretcher.settings.sequenceMode&&(r="normal")):r=e.fn.bgStretcher.settings.sequenceMode,e(n).stop(!0,!0),e.fn.bgStretcher.clearSliderTimeout(),e.fn.bgStretcher.slideShow(r,-1),!1},e.fn.bgStretcher.pagination=function(){var t=e(n).length,r="",i=0;if(t>0){for(r+="<ul>",i=0;t>i;i++)r+='<li><a href="javascript:;">'+(i+1)+"</a></li>";r+="</ul>",e(e.fn.bgStretcher.settings.pagination).html(r),e(e.fn.bgStretcher.settings.pagination).find("li:first").addClass("showPage"),e(e.fn.bgStretcher.settings.pagination).find("a").click(function(){return e(this).parent().hasClass("showPage")?!1:(e(n).stop(!0,!0),e.fn.bgStretcher.clearSliderTimeout(),e.fn.bgStretcher.slideShow(e.fn.bgStretcher.settings.sequenceMode,e(e.fn.bgStretcher.settings.pagination).find("a").index(e(this))),!1)})}return!1},e.fn.bgStretcher.settings={}}(jQuery);